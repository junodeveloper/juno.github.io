# Crocodile #
Crocodile은 무려 2013년에 개발된 **Image Splitter**이다.
## 1. Purpose ##
Image Splitter의 목적은 합쳐진 이미지를 다시 분할하는 것이다.

예를 들면 이런 것이다.

[이미지]

요즘 핫한 드라마 'SKY 캐슬'의 장면들을 상하로 이어 붙인 것이다.

Image Splitter는 이런 이미지를 입력으로 받아서, 다시 여러 장면으로 분할하는 역할을 수행한다.



## 2. Algorithm ##

소스코드를 분석한 결과, 대략적인 알고리즘은 다음과 같았다.



[MD 추가]

1. RGB 채널을 Lab 채널로 변환한다. (using cvtColor)
2. L, a, b 각 채널의 가로, 세로 방향에 대해 sobel edge detector로 엣지를 검출한다
3. 적당한 가중치를 곱해 세 채널의 엣지 검출 결과를 합친다. (combinedEdge)
4. combinedEdge를 vertical 방향으로 먼저 profiling하고, 자를 위치를 판단한다.
   * profiling은 각각의 행(또는 열)마다 해당 행이 엣지일 가능성을 계산하는 작업이다.
   * crocodile은 symmetry profiling이라는 방법을 사용했는데, 아직 그에 관한 논문은 찾아보지 못 했다. (아마 휴리스틱하게 정의한 함수일 수도 있다.)
5. 4에서 잘린 각각의 블록마다 horizontal 방향으로 profiling하고, 자를 위치를 판단한다.
   * 즉, 가로로 먼저 이미지를 잘라낸 뒤, 각각을 다시 세로로 자르는 것. 당연히 이러한 방법으로는 분할이 불가능한 이미지가 존재한다.
6. 잘린 블록들을 적절히 merge한다.
   * mergeSibling.... : 주변 블록들은 다 합쳐져있는데 나만 분리되어있고, 합치면 비디오 비율을 만족하게 될 때 합치는 기능
   * splitSibling... : 주변 블록들은 다 둘로 나누어져있는데 나만 합쳐져있고, 반으로 분리하면 비디오 비율을 만족하게 될 때 분리하는 기능
   * mergeVert... : vertical 방향으로 연속한 두 블록을 합쳤을 때 비율을 만족한다면 합치는 기능



## 3. Issues ##

1. 가로로 자른 후 세로로 자른다?
   * 반례를 얼마든지 쉽게 생각해낼 수 있다.
2. 합쳤을 때 비디오 비율을 만족하면 합친다?
   * 그럴 듯 해 보이지만, 반례가 있었다. 하지만 이게 치명적인 결함인지는 아직 잘 모르겠다.



추후 내용 추가 예정