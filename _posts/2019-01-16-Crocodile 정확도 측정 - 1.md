## Crocodile의 정확도 측정 - 1 ##

2019.01.16의 업무 내용을 정리한 글이다.

### 1. Purpose ###

  새로 제작한 데이터셋을 이용해 기존 이미지 스플리터인 **crocodile** 의 정확도를 측정해본다. 본 글에서는 첫 번째 테스트에 대해 다루며, 추후 두 번째 테스트를 진행할 예정이다.


  첫 테스트에 사용된 데이터셋은 480개의 이미지로 구성되며, 120개씩 각기 다른 영상에서 추출한 프레임으로 구성된다.

  두 번째 테스트에서는 약 10000장의 이미지로 데이터셋을 구성할 것이다. 또한, 영상의 카테고리(장르)별, merge 패턴별로 이미지들을 분류하여 각 분류마다 독립적으로 정확도 측정을 수행할 것이다. 이는 Image Splitter 알고리즘이 어느 데이터셋에 취약한지 알아보고 보완하기 위함이다.

  프레임 추출을 위한 영상은 유튜브에서 다운로드하였다. 첫 테스트에서는 직접 URL을 입력하여 수동으로 다운로드했지만, 두 번째 테스트에서는 스크립트를 이용해 자동으로 크롤링을 할 계획이다.

  본 데이터셋에 포함된 이미지는 6개의 패턴으로 분류되며, 각 패턴은 데이터셋에서 균등한 횟수로 나타난다. 데이터 패턴에 관한 자세한 설명은 이전 "데이터 패턴 분석" 글을 참고하자.

### 3. Method ###

  정확도 측정은 기본적으로 두 사각형 영역이 얼마나 일치하는가를 판단하는 것이 핵심이다. 여러 가지 방법이 가능하나, 여기서는 **IOU (intersection of union)**를 이용해 정확도를 판단했다.

  원본 이미지에서 올바르게 분리되어야 할 영역을 정답 영역이라고 하겠다. 어떤 정답 영역을 알고리즘이 올바르게 분리해 내었는지 판단해야 한다. 따라서 알고리즘이 출력한 모든 영역들을 돌아보면서 정답 영역과의 IOU를 계산할 것이다. 그 중 최대가 되는 값이 있을텐데, 이 값이 threshold 이상이면 올바르게 분리되었다고 판단한다.

  이 과정을 데이터셋의 모든 이미지에 대해 수행한다. 최종적으로, 정확도는 (올바르게 분리된 영역의 수) / (모든 이미지의 총 영역 수) 로 계산하였다.

  첨언하자면, 어떤 이미지에서 알고리즘이 올바르게 분리하지 못한 영역이 하나라도 있을 경우 해당 이미지는 정확도를 0으로 계산하는 방법도 있다. 좀 더 tight한 기준을 부여하는 것이다.

### 4. Result ###

  첫 테스트 수행 결과, 약 30%의 정확도를 나타내었다. 주목할 점은, 골목식당이나 아는형님 등 예능 프로그램에서 추출한 이미지보다 영화 예고편에서 추출한 이미지의 분리 정확도가 더 낮았다. 이는 영화 예고편에 포함된 상하 검은 여백 때문인 것으로 보이며, 여백에서 엣지를 추출하지 못해 알고리즘 성능에 큰 영향을 끼진 것으로 보인다.

### 5. Conclusion ###

  영화 예고편 이미지의 분리율이 낮은 것으로 보아 Crocodile은 여백에 취약하다는 것을 알 수 있다. 향후 이 부분을 보완할 방법에 대해 고찰해봐야겠다.



#### Etc. ####

Github flow (basic of git branch, Pull requests, ..)

(https://guides.github.com/introduction/flow/)
